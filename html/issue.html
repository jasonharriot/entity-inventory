<!DOCTYPE html>

<html>
	<head>
		<link rel="stylesheet" href="style/style.css" />
		<link rel="stylesheet" href="style/issue.css" />
	</head>
	<body>
		<div id="container">
			<div id="header">
				<h1>Entity Inventory</h1>
				<h2><a class="backArrow" href="/"><img src="img/arrow_left.png">Home</a></h2>
			</div>

			<div id="contentContainer">
				<p>To print more labels, get a new PDF file here.</p>
				<p>Important notes:</p>
				<ul>
					<li>Don't save the PDF file. Once generated, print it immedately and then close the window.</li>
					<li>Don't print multiple copies. To print multiple sheets at once, enter a quantity below, <i>then</i> generate the PDF.</li>
					<li>Print single-sided.</li>
					<li>Set the correct sizing options</li>
					<ul>
						<li>Set margins to zero</li>
						<li>Set scale to 100%</li>
					</ul>
				</ul>

				<p>Select from the available templates below.</p>

				<div class="issueOptionsSection">
					<p>Template:</p>
					<select id="selectTemplate">
						<option value="">Select...</option>
					</select>
				</div>
				<div class="issueOptionsSection">
					<p>Number of pages:</p>
					<input id="inputPageCount" type="number" value="0">
				</div>
				<div class="issueOptionsSection">
					<p>Generate PDF:</p>
					<input type="button" value="Go!" id="buttonIssuePDF">
				</div>

			</div>

			<div id="footer">
				EDAC Labs, Inc.
			</div>

			<script src="js/issue.js" type="text/javascript"></script>
			<script src="js/getTemplates.js" type="text/javascript"></script>

			<script type="text/javascript">
				let buttonIssueElem = document.getElementById('buttonIssuePDF');
				let inputPageCountElem = document.getElementById('inputPageCount');
				let selectTemplateElem = document.getElementById('selectTemplate');

				getTemplates().then((templates) => {
					templates.forEach((template) => {
						let elem = document.createElement('option');
						elem.value = template;
						elem.innerText = template;

						selectTemplateElem.appendChild(elem);
					})
				});

				buttonIssueElem.addEventListener('click', () => {
					let num=Number(inputPageCountElem.value);

					let templateIndex = selectTemplateElem.selectedIndex;
					let templateDisplayText = selectTemplateElem.options[templateIndex];
					let templateValue = selectTemplateElem.value;

					if(templateValue.length == 0){
						alert('Select a template.');
						return;
						
					} else if(isNaN(num) || num <= 0 || num >= 100){
						alert('Enter a valid number of pages. (minimum 1, maximum 100)');
						return;
					}



					window.location.href = `api/sheet/${templateValue}/${num}`;
				})
			</script>
		</div>
	</body>
</html>
