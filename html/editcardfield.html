<!DOCTYPE html>

<html>
	<head>
		<link rel="stylesheet" href="/style/style.css" />
		<link rel="stylesheet" href="/style/fields.css" />
		<link rel="stylesheet" href="/style/edit.css" />
	</head>
	<body>
		<div id="container">
			<div id="header">
				<h1>Entity Inventory</h1>
			</div>

			<div id="contentContainer">
				<div class="section">
					<h2>Edit card</h2>
					<p>Tag no.: <span class="fill" id="fillTagID"><i>loading...</i></span></p>
					<p>Field: <span id="spanEditField"><i>loading...</i></span></p>
					
					<p>
						Description: <span id="spanFieldDescription"><i>loading...</i></span>
					</p>

					<textarea id="textareaEdit"></textarea>

					<p>
						<input type="button" value="Save changes" id="buttonSave"/>
					</p>
				</div>
			</div>

			<div id="footer">
				EDAC Labs, Inc.
			</div>
		</div>

		<script type="text/javascript" src="/js/getCard.js"></script>
		<script type="text/javascript" src="/js/showCard.js"></script>
		<script type="text/javascript" src="/js/viewCard.js"></script>

		<script type="text/javascript">
			const buttonSaveElem = document.getElementById('buttonSave');
			const spanEditFieldElem = document.getElementById('spanEditField');

			getCard().then((card) => {
				showCard(card)

				buttonSaveElem.addEventListener('click', () =>  {
					console.log('Saving')
				})

				const params = new URLSearchParams(window.location.search);

				if(!params.has('field')){
					throw new Error('Field parameter not present in URL.');
				}

				spanEditFieldElem.innerText = params.get('field');

			}).catch( e => {
				console.error('Something went wrong:', e);
			});
		</script>
	</body>
</html>
